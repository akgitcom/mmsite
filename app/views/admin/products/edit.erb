<%= form_for [:admin, @product], :html => {:multipart => true, class: "form-horizontal", role: "form"} do |f| -%>
    <fieldset>
      <div id="legend" class="">
        <legend class="">Edit Product</legend>
      </div>
    </fieldset>
    <div class="form-group">
      <%= label_tag(:category_id, "Select Category", for: "inputproduct_ids", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= f.select :category_id,
            nested_set_options(Category) {|i| "#{'-' * i.level} #{i.title}" },
            {:selected => @product.category_id,:include_blank=>'===Select Parent Category==='},
            {class: 'form-control'}
        %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:seotitle, "SEO标题", for: "inputseotitle", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= text_field(:product, :seotitle, class: "form-control", id: "inputseotitle", placeholder: "Seotitle") %>
      </div>
    </div>
    <div class="form-group">
      <%= label_tag(:keywords, "SEO关键字", for: "inputkeywords", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= text_field(:product, :keywords, class: "form-control", id: "inputkeywords", placeholder: "keywords") %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:description, "SEO描述", for: "inputdescription", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= text_area(:product, :description, cols: 20, rows: 4, class: "form-control", id: "inputdescription",) %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:title, "标题", for: "inputtitle", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= text_field(:product, :title, class: "form-control", id: "inputtitle", placeholder: "title") %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:title, "上传5张图片", for: "inputtitle", class: "col-sm-2 control-label") %>
      <div class="col-sm-10">
        <% @product.photos.each do |b| %>
        <div class="fileinput fileinput-new" data-provides="fileinput">
          <div class="fileinput-new thumbnail" style="width: 160px; height: 160px;">
            <%= link_to(image_tag(b.image,height: "100"),
                        {
                                :controller => "photos",
                                :action => "edit",
                                :id => "#{b.id}"
                        }
                ) if b.image?%>
          </div>
          <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 160px; max-height: 160px;"></div>
          <div>
        <span class="btn btn-default btn-file">
          <a target="_blank" href="/admin/photos/<%=b.id%>/edit" class="fileinput-new">Edit Image</a>
          <span class="fileinput-exists">Change</span>

        </span>
            <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
          </div>
        </div>
        <% end %>
        <% @s = @product.photos.size %>
        <% while @s < 5 %>
            <div class="fileinput fileinput-new" data-provides="fileinput">
                <div class="fileinput-new thumbnail" style="width: 160px; height: 160px;">

                </div>
                <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 160px; max-height: 160px;"></div>
                <div>
                <span class="btn btn-default btn-file">
                    <span class="fileinput-new">Select image</span>
                    <span class="fileinput-exists">Change</span>
                  <%= file_field_tag "images[]",value:"", type: :file, multiple: false,accept: 'image/png,image/gif,image/jpeg' %>
                </span>
                <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                </div>
            </div>

            <% @s += 1%>
        <% end %>

        <script>
            $('.fileinput').fileinput()
        </script>
      </div>
    </div>



    <div class="form-group">
      <%= label_tag(:shortcontent, "简述", for: "inputshortcontent", class: "col-sm-2 control-label") %>
      <div class="col-sm-10">
        <%= f.cktext_area :shortcontent, :class => 'form-control', :ckeditor => {:language => 'zh-CN'} %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:content, "内容", for: "inputcontent", class: "col-sm-2 control-label") %>
      <div class="col-sm-10">
        <%= f.cktext_area :content, :class => 'form-control', :ckeditor => {:language => 'zh-CN'} %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:sort, "排序", for: "inputsort", class: "col-sm-2 control-label") %>
      <div class="col-sm-4">
        <%= f.number_field(:sort, class: "form-control", id: "inputsort", placeholder: "sort") %>
      </div>
    </div>

    <div class="form-group">
      <%= label_tag(:faq_ids, "相关技术支持", for: "inputproduct_ids", class: "col-sm-2 control-label") %>
      <div class="col-sm-6">
        <%= f.select :faq_ids, Faq.all.collect {|x| [x.title, x.id]},
                     {:selected => @relatefaqs.all.collect{ |u|u.id}},
                     {:multiple => true,size: 10, class: "form-control" }%>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <div class="checkbox">
          <label>
            <%= f.check_box :sblock, {}, 1, false %> 锁定
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <%= f.submit 'Add article', :class => 'btn btn-success btn-lg' %>
      </div>
    </div>
<% end -%>